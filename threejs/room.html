<!DOCTYPE html>
<html>

<head>
    <title>Room</title>
 <link
    rel="shortcut icon"
    href="{{ url_for('static', filename='cyborgshaman.jpg') }}"
  />

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <script src="js/three.js"></script>
    <script src="js/controls/OrbitControls.js"></script>
    <script src="js/csg.js"></script>
    <script src="js/THREE.CSG.js"></script>
    <script src="js/WebGL.js"></script>

  <!--script "type=text/javascript" src="{{ url_for('static',
	  filename='js/cgs.js')}}"></script>
    <script 'type=text/javascript' src="{{ url_for('static', 
	  filename='js/THREE.CSG.js')}}"></script>
    <script 'type=text/javascript' src="{{ url_for('static', 
          filename='js/WebGL.js')}}"></script>
    
    <!--script src="js/csg.js"></script>
    <script src="js/THREE.CSG.js"></script>
    <script src="js/WebGL.js"></script-->
    <script>
        if (WEBGL.isWebGLAvailable() === false) {

            document.body.appendChild(WEBGL.getWebGLErrorMessage());

        }
        var scene, aspect, camera, renderer, controls;
        init();
        animate();

        function init() {
            if (WEBGL.isWebGLAvailable() === false) {
                document.body.appendChild(WEBGL.getWebGLErrorMessage());
            }
            //INICIALIZACIÓN
            scene = new THREE.Scene();
            aspect = window.innerWidth / window.innerHeight;
            camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 1000);
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            controls = new THREE.OrbitControls(camera, renderer.domElement);

            //ELEMENTOS COMUNES
	    var pihalf=THREE.Math.degToRad(90);
            var size = 30;
            var arrowSize = 10;
            var divisions = size;
            var origin = new THREE.Vector3(0, 0, 0);
            var x = new THREE.Vector3(1, 0, 0);
            var y = new THREE.Vector3(0, 1, 0);
            var z = new THREE.Vector3(0, 0, 1);
            var color = new THREE.Color(0x231100);
            var colorV = new THREE.Color(0x5b3952);
            var colorTinto = new THREE.Color(0x5b0000);
            var colorM = new THREE.Color(0xdedede);
            var colorB = new THREE.Color(0xffffff);
            //  var colorPa = new THREE.Color(0xfccd6f);
            var colorPa = new THREE.Color(0xfcb16f);
            //var colorPa = new THREE.Color(0xf1f1f1);

            //CREAR LAS GRILLAS PARA EL ESCENARIO
            var axesHelper = new THREE.AxesHelper(arrowSize);
            //scene.add(axesHelper);

            var gridHelperXZ = new THREE.GridHelper(size, divisions, color, color);
            //scene.add(gridHelperXZ);

            //ROTARLAS PARA QUE QUEDEN EN EL ESPACIO ADECUADO
            gridHelperXZ.rotateOnWorldAxis(y, THREE.Math.degToRad(90));

            //CREAR ILUMINACIÓN
            var ambient = new THREE.AmbientLight(0xfdecaa, 0.4);
            scene.add(ambient);

            var pointLight = new THREE.PointLight(0xffffbb, 1, 50);
            pointLight.position.set(0, 10, -10);
            scene.add(pointLight);

            var pointLight2 = new THREE.PointLight(0xffffbb, 1, 50);
            pointLight2.position.set(0, 10, 40);
            scene.add(pointLight2);

            var pointLight3 = new THREE.PointLight(0xffffbb, 1, 50);
            pointLight3.position.set(0, 10, 95);
            scene.add(pointLight3);

            var pointLight4 = new THREE.PointLight(0xffffff, 2.5, 10);
            pointLight4.position.set(0, -8, 94);
            scene.add(pointLight4);




            //CREAR LAS GEOMETRIAS
            var roomsizex = 80;//30
	    // height
	    var roomsizey = 40;//40 move later 
	    // long
	    var roomsizez = 60;//200

	    
            var boxGeometry = new THREE.BoxGeometry(roomsizex, 40, roomsizez);
            var boxGeometry2 = new THREE.BoxGeometry(roomsizex-2, 38, roomsizez);
	    //puerta
            var plano = new THREE.PlaneGeometry(9, 30);
	    //madera pared
	    var plano2 = new THREE.PlaneGeometry(roomsizez-1, 4);
	    //madera pared fondo
            var plano3 = new THREE.PlaneGeometry(roomsizex-1, 4);
	    //piso
            var planop = new THREE.PlaneGeometry(roomsizex-1, roomsizez-1);
	    //paredes
            var planoPar = new THREE.PlaneGeometry(40, roomsizez);
            var planoFond = new THREE.PlaneGeometry(roomsizex-2, 33);

            var sphereGeometry = new THREE.SphereGeometry(2.5, 25, 25);
            var cylinderGeometry = new THREE.CylinderGeometry(2.5, 2.5, 8, 25);
            var bombiGeometry = new THREE.SphereGeometry(1.5, 15, 15);
	    //marcos de puertas
            var puGeometry = new THREE.BoxGeometry(1, 30, 1);
            var pu2Geometry = new THREE.BoxGeometry(1, 1, 10);
	    //vigas
            var puAGeometry = new THREE.BoxGeometry(6, 6, roomsizez);
	    //columnas
	    var puBGeometry = new THREE.BoxGeometry(5, 38, 6);
            var puBPGeometry = new THREE.BoxGeometry(5.1, 4, 6.1);

            var mycylinder = new THREE.CylinderGeometry(4, 5, 5, 30);
            


            //CREAR LOS MATERIALES
            var materialPared = new THREE.MeshStandardMaterial({
                color: colorB,
                metalness: 0,
                roughness: 0.8,

            });
            
            
            var metal = new THREE.MeshStandardMaterial({
                color: colorM,
                metalness: 0.8,
                roughness: 0.5,

            });
            var Matninas = new THREE.MeshStandardMaterial({
                color: colorV,
                metalness: 0,
                roughness: 0,
                transparent: true,
                opacity: 0.9
            });
            var Matnew = new THREE.MeshStandardMaterial({
                color: colorTinto,
                metalness: 0.3,
                roughness: 0,
                transparent: true,
                opacity: 0.9
            });

            var materialbomb = new THREE.MeshBasicMaterial({
                color: 0xffffaa
            });

            //TEXTURAS

            var woodBase = new THREE.TextureLoader().load('textures/ColorMad.jpg');
            var woodNormal = new THREE.TextureLoader().load('textures/NormalMad.jpg');
            var woodMaterial = new THREE.MeshStandardMaterial({
                map: woodBase,
                normalMap: woodNormal
            });
            
            var lightWoodBase = new THREE.TextureLoader().load('textures/lightWood.jpg');
            //var woodNormal = new THREE.TextureLoader().load('textures/NormalMad.jpg');
            var woodMaterial = new THREE.MeshStandardMaterial({
                map: lightWoodBase,
                normalMap: woodNormal
            });

            var patBase = new THREE.TextureLoader().load('textures/ColorPat.jpg');
            var patNormal = new THREE.TextureLoader().load('textures/NormalPat.jpg');
            var materialPare = new THREE.MeshStandardMaterial({
                color: 0xffffff,
                roughness: 0.5,
		metalness: 0.1,
                //transparent: true,
                //opacity: 0.8,
                //map: patBase,
                //normalMap: patNormal
            });
            
            var materialPuertas = new THREE.MeshStandardMaterial({
                color: colorPa,
                metalness: 0,
                roughness: 0.2,
                //map: woodBase,
                //normalMap: woodNormal,
            });

            var materialPiso = new THREE.MeshStandardMaterial({
                //color: colorTinto,
                metalness: 0.2,
                //transparent: true,
                roughness: 0.1,
                map: lightWoodBase,
                normalMap: woodNormal,
            });
            
            //EXP MIO

	    //pasillo caja
            var box1 = new THREE.Mesh(boxGeometry);
            var box2 = new THREE.Mesh(boxGeometry2);
            box2.position.z = 1;
            var box1CSG = THREE.CSG.fromMesh(box1);
            var box2CSG = THREE.CSG.fromMesh(box2);
            var result = box1CSG.subtract(box2CSG);
            var pasillo = THREE.CSG.toMesh(result);
            pasillo.material = materialPare;

	    //puerta
            var p2 = new THREE.Mesh(plano, materialPuertas);
            p2.rotateY(1.5708);
            p2.position.x = -(roomsizex-2.4)/2;
            p2.position.y = -5;
            p2.position.z = (roomsizez-20)/4;

	    //madera lateral
            var pb1 = new THREE.Mesh(plano2, materialPuertas);
            pb1.rotateY(-1.5708);
            pb1.position.x = (roomsizex-2.4)/2;
            pb1.position.y = -17;
            //pb1.position.z = 2;

            var pb2 = new THREE.Mesh(plano2, materialPuertas);
            pb2.rotateY(1.5708);
            pb2.position.x = -(roomsizex-2.4)/2;
            pb2.position.y = -17;
            //pb2.position.z = 2;

	    //madera fondo
            var pbf = new THREE.Mesh(plano3, materialPuertas);
            pbf.position.y = -17;
            pbf.position.z = -(roomsizez-2.4)/2;

	    var pbfback = new THREE.Mesh(plano3, materialPuertas);
	    pbfback.rotateY(2*1.5708);
            pbfback.position.y = -17;
            pbfback.position.z = (roomsizez-2.4)/2;

            var piso = new THREE.Mesh(planop, Matninas);
            piso.rotateX(-1.5708);
            piso.position.y = -18.9;
            //piso.position.z = 2;

            var par1 = new THREE.Mesh(planoPar, materialPared);
            par1.rotateY(-1.5708);
            par1.rotateZ(-1.5708);
            par1.position.x = (roomsizex-2.2)/2;

            var par2 = new THREE.Mesh(planoPar, materialPared);
            par2.rotateY(1.5708);
            par2.rotateZ(-1.5708);
            par2.position.x = -(roomsizex-2.2)/2;

            var parfo = new THREE.Mesh(planoFond, materialPared);
            parfo.position.z = -(roomsizez-2.2)/2;

	    var parback = new THREE.Mesh(planoFond, materialPared);
	    parback.rotateY(2*1.5708);
            parback.position.z = (roomsizez-2.2)/2;

	    var parbacktop = new THREE.Mesh(planoFond, materialPare);
	    parbacktop.rotateY(2*1.5708);
            parbacktop.position.z = (roomsizez-1)/2;
            parbacktop.position.y = 4;

	    //borde vertical de la puerta
            var coso = new THREE.Mesh(puGeometry, materialPuertas);
            coso.position.z = 85;
            coso.position.x = -13.9;
            coso.position.y = -4;
            var coso2 = new THREE.Mesh(puGeometry, materialPuertas);
            coso2.position.z = 95;
            coso2.position.x = -13.9;
            coso2.position.y = -4;
	    //mi puerta
            var coso3 = new THREE.Mesh(puGeometry, materialPuertas);
            coso3.position.z = (roomsizez-20)/4-5;
            coso3.position.x = -(roomsizex-2.2)/2;
            coso3.position.y = -4;
            var coso4 = new THREE.Mesh(puGeometry, materialPuertas);
            coso4.position.z = (roomsizez-20)/4+5;
            coso4.position.x = -(roomsizex-2.2)/2;
            coso4.position.y = -4;
	    //otras
            var coso5 = new THREE.Mesh(puGeometry, materialPuertas);
            coso5.position.z = 90;
            coso5.position.x = 13.9;
            coso5.position.y = -4;
            var coso5b = new THREE.Mesh(puGeometry, materialPuertas);
            coso5b.position.z = 80;
            coso5b.position.x = 13.9;
            coso5b.position.y = -4;
            var coso6 = new THREE.Mesh(puGeometry, materialPuertas);
            coso6.position.z = 100;
            coso6.position.x = 13.9;
            coso6.position.y = -4;
            var coso7 = new THREE.Mesh(puGeometry, materialPuertas);
            coso7.position.z = 35;
            coso7.position.x = 13.9;
            coso7.position.y = -4;
            var coso8 = new THREE.Mesh(puGeometry, materialPuertas);
            coso8.position.z = 45;
            coso8.position.x = 13.9;
            coso8.position.y = -4;

	    //borde horizontal de las puertas
            var cosa = new THREE.Mesh(pu2Geometry, materialPuertas);
            cosa.position.z = 90;
            cosa.position.x = -13.9;
            cosa.position.y = 10.5;
	    //mi puerta
            var cosa1 = new THREE.Mesh(pu2Geometry, materialPuertas);
            cosa1.position.z = (roomsizez-20)/4;
            cosa1.position.x = -(roomsizex-2.2)/2;
            cosa1.position.y = 10.5;
            var cosa2 = new THREE.Mesh(pu2Geometry, materialPuertas);
            cosa2.position.z = 95;
            cosa2.position.x = 13.9;
            cosa2.position.y = 10.5;
            var cosa2b = new THREE.Mesh(pu2Geometry, materialPuertas);
            cosa2b.position.z = 85;
            cosa2b.position.x = 13.9;
            cosa2b.position.y = 10.5;
            var cosa3 = new THREE.Mesh(pu2Geometry, materialPuertas);
            cosa3.position.z = 40;
            cosa3.position.x = 13.9;
            cosa3.position.y = 10.5;

	    //vigas
            var cosAR = new THREE.Mesh(puAGeometry, materialPare);
            cosAR.position.x = (roomsizex-2.2)/2;
            cosAR.position.y = 19;

            var cosAR2 = new THREE.Mesh(puAGeometry, materialPare);
            cosAR2.position.x = -(roomsizex-2.2)/2;
            cosAR2.position.y = 19;

	    //columnas
            var bar3 = new THREE.Mesh(puBGeometry, materialPared);
            bar3.position.z = (roomsizez-20)/4-20;
            bar3.position.x = -(roomsizex-2.2)/2;
            bar3.position.y = -2;

            var bar4 = new THREE.Mesh(puBGeometry, materialPared);
            bar4.position.z = 0;
            bar4.position.x = -13.9;
            bar4.position.y = -2;

	    //base columnas
            var bara3 = new THREE.Mesh(puBPGeometry, materialPuertas);
            bara3.position.z = (roomsizez-20)/4-20;
            bara3.position.x = -(roomsizex-2.2)/2;
            bara3.position.y = -17;

            var bara4 = new THREE.Mesh(puBPGeometry, materialPuertas);
            bara4.position.z = 0;
            bara4.position.x = -13.9;
            bara4.position.y = -17;

            var bara5 = new THREE.Mesh(puBPGeometry, materialPuertas);
            bara5.position.z = 10;
            bara5.position.x = 13.9;
            bara5.position.y = -17;

            var bara6 = new THREE.Mesh(puBPGeometry, materialPuertas);
            bara6.position.z = -30;
            bara6.position.x = 13.9;
            bara6.position.y = -17;

            //Bombillos
            var b1 = new THREE.Mesh(bombiGeometry, materialbomb);
            b1.position.z = -10;
            b1.position.y = 13;
            var b2 = new THREE.Mesh(bombiGeometry, materialbomb);
            b2.position.z = 10;
            b2.position.y = 13;

	    
            var curve2D = new THREE.SplineCurve([
                new THREE.Vector2(0, 20),
                new THREE.Vector2(0, 13),
            ]);

            var material = new THREE.LineBasicMaterial({
                color: 0x593d25
            });
            var resolution = 150;
            var points = curve2D.getPoints(resolution);
            var geometry = new THREE.BufferGeometry().setFromPoints(points);
            var bc1 = new THREE.Line(geometry, material);
            bc1.position.z = -10;
            var bc2 = new THREE.Line(geometry, material);
            bc2.position.z = roomsizez/2;
            scene.add(bc1);
            scene.add(bc2);

            var curveC1 = new THREE.CatmullRomCurve3([
                new THREE.Vector3(-5, -10, 92),
                new THREE.Vector3(-3, -8, 95),
                new THREE.Vector3(0, -13, 95),
                new THREE.Vector3(3, -8, 92),
                new THREE.Vector3(5, -10, 92)

            ])

            var extrudeSettings = {
                steps: 200,
                bevelEnabled: false,
                extrudePath: curveC1
            };


            var pts = [],
                count = 70;

            for (var i = 0; i < count; i++) {

                var l = 0.3;

                var a = 2 * i / count * Math.PI;

                pts.push(new THREE.Vector4(Math.cos(a) * l, Math.sin(a) * l));

            }

            var shape = new THREE.Shape(pts);

            var geoMan = new THREE.ExtrudeBufferGeometry(shape, extrudeSettings);
            var manubrio = new THREE.Mesh(geoMan, metal);


            yellowmaterial= new THREE.MeshBasicMaterial({ 
                color: 0xaaaa00 , 
                side: THREE.DoubleSide, 
                transparent: true,
                opacity: 0.7
            });

            orangematerial= new THREE.MeshBasicMaterial({ 
                color: 0xbb7700 , 
                side: THREE.DoubleSide, 
                transparent: true,
                opacity: 0.7
            });

            redmaterial= new THREE.MeshBasicMaterial({ 
                color: 0xbb0000 , 
                side: THREE.DoubleSide, 
                transparent: true,
                opacity: 0.7
            });

            bluematerial= new THREE.MeshBasicMaterial({ 
                color: 0x0022aa , 
                side: THREE.DoubleSide, 
                transparent: true,
                opacity: 0.7
            });


	    var geometry = new THREE.Geometry();
            geometry.faces= [
                new THREE.Face3(0, 1, 2),
                new THREE.Face3(1, 3, 4),
                new THREE.Face3(2, 4, 5),
                new THREE.Face3(3, 6, 7),
                new THREE.Face3(4, 7, 8),

	    ];
            var geometry0 = new THREE.Geometry();
            geometry0.vertices= [
                new THREE.Vector3(1.0, 0.0, 0.0),
                new THREE.Vector3(1.0186518518518517, 0.09734814814814816, 0.0),
                new THREE.Vector3(1.0186518518518517, 0.0, 0.09734814814814816),
                new THREE.Vector3(1.0345481481481482, 0.18945185185185184, 0.0),
                new THREE.Vector3(1.0221037037037037, 0.08490370370370372, 0.08490370370370372),
                new THREE.Vector3(1.0345481481481482, 0.0, 0.18945185185185184),
                new THREE.Vector3(1.0476, 0.27640000000000003, 0.0),
                new THREE.Vector3(1.0236, 0.16545185185185185, 0.07334814814814816),
                new THREE.Vector3(1.0235999999999998, 0.07334814814814816, 0.16545185185185185),
                new THREE.Vector3(1.0476, 0.0, 0.27640000000000003),
                new THREE.Vector3(1.0577185185185185, 0.3582814814814815, 0.0),
                new THREE.Vector3(1.0230518518518519, 0.24173333333333333, 0.06268148148148149),
                new THREE.Vector3(1.0114962962962963, 0.14322962962962962, 0.14322962962962962),
                new THREE.Vector3(1.0230518518518519, 0.06268148148148146, 0.24173333333333336),
                new THREE.Vector3(1.0577185185185185, 0.0, 0.3582814814814815),
                new THREE.Vector3(1.0648148148148149, 0.4351851851851852, 0.0),
 
	];
            geometry0.faces= geometry.faces
            var mesh= new THREE.Mesh( geometry0,  redmaterial);
            //scene.add(mesh);

	    //AGREGAR A LA ESCENA LOS DIFERENTES ELEMENTOS

            scene.add(pasillo);
            //scene.add(p1);
            scene.add(p2);
            //scene.add(p3);
            //scene.add(p4);
            //scene.add(p5);
            scene.add(pb1);
            scene.add(pb2);
            scene.add(pbf);
            scene.add(pbfback);
            scene.add(piso);
            //scene.add(manubrio);
            //scene.add(nina1);
            //scene.add(nina2);
            scene.add(b1);
            scene.add(b2);
            //scene.add(coso);
            //scene.add(coso2);
            scene.add(coso3);
            scene.add(coso4);
            //scene.add(coso5);
            //scene.add(coso5b);
            //scene.add(coso6);
            //scene.add(coso7);
            //scene.add(coso8);
            //scene.add(cosa);
            scene.add(cosa1);
            //scene.add(cosa2);
            //scene.add(cosa2b);
            //scene.add(cosa3);

            scene.add(cosAR);
            scene.add(cosAR2);

	    //columnas
            scene.add(bar3);
            //scene.add(bar4);
            scene.add(bara3);
            //scene.add(bara4);

            scene.add(par1);
            scene.add(par2);
            scene.add(parfo);
            scene.add(parback);
            scene.add(parbacktop);
           
            camera.position.x = 0;
            camera.position.y = 1;
            camera.position.z = 2.7;
            camera.lookAt(origin);
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            render();
        }

        function render() {
            renderer.render(scene, camera);
        }
    </script>
<button id='button' style="left:12%; top:75% " onClick="grafosClick() "> <a href="index.html">back</a></button>

</body>

</html>

